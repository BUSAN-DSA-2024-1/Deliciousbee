<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/index.css">
<link rel="stylesheet" href="/css/myPage.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


<title>ë§ˆì´í˜ì´ì§€</title>
</head>
<body>
	<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” ì‚½ì… -->
	<th:block th:replace="~{fragments/navbar-login :: navbar}"></th:block>
	<!-- ë¡œê·¸ì¸ ëª¨ë‹¬ ì‚½ì… -->
	<th:block th:replace="~{fragments/navbar-login :: loginModal}"></th:block>






	<div class="main-image">
		<!-- ë©”ì¸ ì´ë¯¸ì§€ -->
		<img th:if="${myPage.mainImage == null}"
			src="/myPageImage/no-main-image.png" alt="ê¸°ë³¸ ì´ë¯¸ì§€"
			class="default-main-image"> <img
			th:unless="${myPage.mainImage == null}"
			th:src="@{'/loginMember/display?filename=' + ${loginMember.Image.saved_filename}}"
			alt="ë©”ì¸ ì´ë¯¸ì§€">
		<!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
		<div class="profile-image">
			<img th:if="${myPage.beeMember.profileImage == null}"
				src="/myPageImage/no-profil.png" alt="ê¸°ë³¸ ì´ë¯¸ì§€"
				class="my-profile-image"> <img
				th:unless="${myPage.beeMember.profileImage == null}"
				th:src="@{'/member/display?filename=' + ${myPage.beeMember.profileImage.saved_filename}}"
				alt="ë©”ì¸ ì´ë¯¸ì§€" class="my-profile-image">
		</div>
	</div>


	<div class="myPageOwner">
		<div class="owner-profile">
			<div class="nickname-header">
				<h4 class="nickname"
					th:text="${myPage.beeMember.nickname} + ' ë‹˜ì˜ ë§ˆì´í˜ì´ì§€' "></h4>
				<span th:with="followService=${@followService}"
					class="follow-button-wrapper">
					<div th:if="${!isOwner}">
						<button th:if="${loginMember != null}"
							th:id="'followButton' + ${myPage.beeMember.member_id}"
							th:data-following-id="${myPage.beeMember.member_id}"
							th:class="${followService.isFollowing(loginMember.member_id, myPage.beeMember.member_id)} ? 'follow-button' : 'nofollow'"
							onclick="toggleFollow(this)">
							<img
								th:src="${followService.isFollowing(loginMember.member_id, myPage.beeMember.member_id)} ? @{/myPageImage/unfollow.png} : @{/myPageImage/follow.png}"
								alt="íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš°">
						</button>
						<div class="no-login-follow">
							<a th:if="${loginMember == null}" th:href="@{login}"
								onclick="return showLoginAlert()" class="nofollow">íŒ”ë¡œìš°</a>
						</div>
						<!-- íŒ”ë¡œì›Œ/íŒ”ë¡œì‰ ëª©ë¡ ë²„íŠ¼ -->
					</div>
					<button class="follow-list" onclick="showFollowersModal()">
						<img src="/myPageImage/follower-list.png" alt="íŒ”ë¡œì›Œ ëª©ë¡">
					</button>
					<button class="follow-list" onclick="showFollowingModal()">
						<img src="/myPageImage/follwing-list.png" alt="íŒ”ë¡œì›Œ ëª©ë¡">
					</button>
				</span>
				<div class="goUpdate-button"
					th:if="${loginMember != null and loginMember.member_id == myPage.beeMember.member_id}">
					<button class="update-btn"
						onclick="location.href='/member/updateMyPage'">
						<img src="/myPageImage/update-myPage.png" alt="ìˆ˜ì •í•˜ê¸° ì•„ì´ì½˜">
					</button>
				</div>
			</div>
			<h4 class="intro-title">ì†Œê°œê¸€</h4>
			<div class="introduce"
				th:if="${myPage.introduce != null and !myPage.introduce.isEmpty()}"
				th:text="${myPage.introduce}"></div>
			<div class="introduce"
				th:unless="${myPage.introduce != null and !myPage.introduce.isEmpty()}">ì†Œê°œê¸€ì´
				ì—†ìŠµë‹ˆë‹¤</div>
		</div>

		<!-- íŒ”ë¡œì›Œ ëª©ë¡ ëª¨ë‹¬ -->
		<div id="followersModal" class="list-modal">
			<div class="follow-modal-content">
				<span class="close-modal" onclick="closeFollowersModal()">Ã—</span>
				<h3>íŒ”ë¡œì›Œ ëª©ë¡</h3>
				<p>
					íŒ”ë¡œì›Œìˆ˜: <span th:text="${myPage.beeMember.followerList.size()}"></span>
				</p>
				<ul>
					<li th:each="follower : ${myPage.beeMember.followerList}"><a
						th:href="@{/member/myPage(id=${follower.follower.myPage.id})}"
						th:text="${follower.follower.nickname}"></a></li>
				</ul>
			</div>
		</div>

		<!-- íŒ”ë¡œì‰ ëª©ë¡ ëª¨ë‹¬ -->
		<div id="followingModal" class="list-modal">
			<div class="follow-modal-content">
				<span class="close-modal" onclick="closeFollowingModal()">Ã—</span>
				<h3>íŒ”ë¡œì‰ ëª©ë¡</h3>
				<p>
					íŒ”ë¡œì›Œìˆ˜: <span th:text="${myPage.beeMember.followingList.size()}"></span>
				</p>
				<ul>
					<li th:each="following : ${myPage.beeMember.followingList}"><a
						th:href="@{/member/myPage(id=${following.following.myPage.id})}"
						th:text="${following.following.nickname}"></a></li>
				</ul>
			</div>
		</div>

		<div class="owner-stats">
			<span th:text="'ë¦¬ë·°í•œìˆ˜ : ' + ${myPage.beeMember.review.size()}"></span>
			<span
				th:text="'í‰ê·  ë³„ì  : (' + ${#numbers.formatDecimal(averageRating, 1, 1)} + '/5.0)'"></span>
			<span th:text="'ì¡°íšŒìˆ˜: ' + ${myPage.hit}"></span> <span
				th:text="'ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜: ' + ${todayVisitCount}"></span> <a
				class="today_visitor" onclick="showVisitorsModal()">ì˜¤ëŠ˜ì˜ ë°©ë¬¸ìë³´ê¸°</a>
		</div>

		<!-- ì˜¤ëŠ˜ì˜ ë°©ë¬¸ì ëª©ë¡ ëª¨ë‹¬ -->
		<div id="visitorsModal" class="list-modal">
			<div class="visit-modal-content">
				<span class="close-modal" onclick="closeVisitorsModal()">Ã—</span>
				<h3>ì˜¤ëŠ˜ì˜ ë°©ë¬¸ì</h3>
				<ul>
					<li th:each="visit : ${visitors}"><a
						th:href="@{/member/myPage(id=${visit.visitor.myPage.id})}"
						th:text="${visit.visitor.nickname}"></a></li>
				</ul>
			</div>
		</div>

	</div>
	<div class="select-list">
		<div class="review-sort-container">
			<select id="reviewSort" class="sort-select" onchange="sortReviews()">
				<option value="createDate"
					th:selected="${currentSort == 'createDate'}">ë¦¬ë·° ì‘ì„± ë‚ ì§œìˆœ</option>
				<option value="visitDate"
					th:selected="${currentSort == 'visitDate'}">ë°©ë¬¸ ë‚ ì§œìˆœ</option>
			</select>
		</div>
		<ul class="myPageNav">
			<li class="nav-item">
				<button type="button" onclick="showTab('myReview')"
					data-tab="myReview">ë§ˆì´ë¦¬ë·°</button>
			</li>
			<li class="nav-item">
				<button type="button" onclick="showTab('myRestaurant')"
					data-tab="myRestaurant">ìì£¼ê°€ëŠ” ì‹ë‹¹</button>
			</li>
		</ul>
	</div>


	<!-- ë§ˆì´ë ˆìŠ¤í† ë‘ ë‚´ìš© -->
	<div id="myRestaurantContent" style="display: none;"
		class="myRestaurantContent">
		<div class="rt"
			th:if="${pagedLikedRestaurants.content != null and !pagedLikedRestaurants.content.isEmpty()}">
			<div class="restaurant-list">
				<div th:each="restaurant : ${pagedLikedRestaurants.content}"
					class="restaurant-item">
					<img
						th:if="${restaurant.attachedFile != null and !restaurant.attachedFile.isEmpty()}"
						th:src="@{'/restaurant/display?filename=' + ${restaurant.attachedFile[0].saved_filename}}"
						alt="Restaurant Image" class="restaurant-image"> <img
						th:unless="${restaurant.attachedFile != null and !restaurant.attachedFile.isEmpty()}"
						src="/myPageImage/no-review-img.jpg" alt="No Restaurant Image"
						class="restaurant-image">
					<div class="restaurant-info">
						<a th:href="@{/restaurant/rtread/{id}(id=${restaurant.id})}"
							title="ì‹ë‹¹ ì •ë³´ë¡œ ì´ë™">
							<h3 th:text="${restaurant.name}" class="restaurant_name"
								style="text-decoration: none;"></h3>
						</a>
						<p>
							â­ í‰ê·  í‰ì : <span th:text="${restaurant.average_rating}"></span>
						</p>
						<p>
							ğŸ“– ë¦¬ë·° ìˆ˜: <span th:text="${restaurant.review_count}"></span>
						</p>
						<p>
							ğŸ½ï¸ ì¹´í…Œê³ ë¦¬: <span th:text="${restaurant.mainCategory}"></span>
						</p>
						<button type="button" class="menu-button"
							th:onclick="|showRtMenuModal('RtMenuModal${restaurant.id}')|">ğŸ½ï¸
							ë©”ë‰´ ë³´ê¸°</button>

						<div th:id="'RtMenuModal' + ${restaurant.id}" class="menu-modal">
							<div class="menu-modal-content">
								<span class="close"
									th:onclick="|closeRtMenuModal('RtMenuModal${restaurant.id}')|">Ã—</span>
								<ul>
									<li th:each="menu : ${restaurant.menuList}"><span
										th:text="'ğŸ¯' + ${menu.name} + ' - ê°€ê²©: ' + ${#numbers.formatInteger(menu.price, 0, 'COMMA')}"></span>
									</li>
								</ul>
							</div>
						</div>

					</div>
				</div>
			</div>
			<div class="ranking-rt">
				<table class="top-liked-restaurants">
					<h2 class="ranking-title">ì¢‹ì•„ìš” ì™•ğŸ‘‘</h2>
					<thead>
						<tr>
							<th>#</th>
							<th style="text-align: left;">ì‹ë‹¹ ì´ë¦„</th>
							<th style="text-align: center;">ì¢‹ì•„ìš” ìˆ˜</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="restaurant, status : ${mostLikedRestaurants}"
							th:if="${status.index} < 4">
							<td class="center" th:if="${status.index} == 0">ğŸ¥‡</td>
							<td class="center" th:if="${status.index} == 1">ğŸ¥ˆ</td>
							<td class="center" th:if="${status.index} == 2">ğŸ¥‰</td>
							<td class="center" th:unless="${status.index} < 3"
								th:text="${status.index + 1} + '.'"></td>
							<td class="center"><a
								th:href="@{/restaurant/rtread/{id}(id=${restaurant.id})}"
								class="restaurant-name-link"> <span
									th:text="${restaurant.name}"></span>
							</a></td>
							<td class="center" style="text-align: center;"
								th:text="${restaurant.likeCount}"><span
								th:if="${restaurant.likeCount} >= 100"> ğŸ‰</span> <!-- 100 ì´ìƒ ì¢‹ì•„ìš” ì´ëª¨í‹°ì½˜ -->
							</td>
						</tr>
					</tbody>
				</table>

				<!--ëœë¤ ë ˆìŠ¤í† ë‘  -->
				<div id="randomRestaurantContainer"
					class="restaurant-random-container">
					<h3>ì˜¤ëŠ˜ì˜ ì‹ë‹¹</h3>
					<div id="currentRandomRestaurant">
						<!-- id ë³€ê²½: currentRandomRestaurant -->
						<!-- ëœë¤ ë ˆìŠ¤í† ë‘ ë¦¬ë·°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
					</div>
					<button id="nextRestaurantButton">ë‹¤ìŒ</button>
				</div>
			</div>
		</div>
		<p
			th:unless="${pagedLikedRestaurants.content != null and !pagedLikedRestaurants.content.isEmpty()}">ì¢‹ì•„ìš”í•œ
			ë ˆìŠ¤í† ë‘ì´ ì—†ì–´ìš”ã… </p>
		<div class="rtrt2">
			<div class="ranking-rt2">
				<table class="top-liked-restaurants">
					<h2 class="ranking-title">ì¢‹ì•„ìš” ì™•ğŸ‘‘</h2>
					<thead>
						<tr>
							<th>#</th>
							<th style="text-align: left;">ì‹ë‹¹ ì´ë¦„</th>
							<th style="text-align: center;">ì¢‹ì•„ìš” ìˆ˜</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="restaurant, status : ${mostLikedRestaurants}"
							th:if="${status.index} < 4">
							<td class="center" th:if="${status.index} == 0">ğŸ¥‡</td>
							<td class="center" th:if="${status.index} == 1">ğŸ¥ˆ</td>
							<td class="center" th:if="${status.index} == 2">ğŸ¥‰</td>
							<td class="center" th:unless="${status.index} < 3"
								th:text="${status.index + 1} + '.'"></td>
							<td class="center"><a
								th:href="@{/restaurant/rtread/{id}(id=${restaurant.id})}"
								class="restaurant-name-link"> <span
									th:text="${restaurant.name}"></span>
							</a></td>
							<td class="center" style="text-align: center;"
								th:text="${restaurant.likeCount}"><span
								th:if="${restaurant.likeCount} >= 100"> ğŸ‰</span> <!-- 100 ì´ìƒ ì¢‹ì•„ìš” ì´ëª¨í‹°ì½˜ -->
							</td>
						</tr>
					</tbody>
				</table>

				<!--ëœë¤ ë ˆìŠ¤í† ë‘  -->
				<div id="randomRestaurantContainer"
					class="restaurant-random-container">
					<h3>ì˜¤ëŠ˜ì˜ ì‹ë‹¹</h3>
					<div id="currentRandomRestaurant">
						<!-- id ë³€ê²½: currentRandomRestaurant -->
						<!-- ëœë¤ ë ˆìŠ¤í† ë‘ ë¦¬ë·°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
					</div>
					<button id="nextRestaurantButton">ë‹¤ìŒ</button>
				</div>
			</div>
			<div class="ranking2">
				<h2>ë¦¬ë·°ì™•ğŸ‘‘</h2>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>#</th>
							<th style="text-align: left;">ë‹‰ë„¤ì„</th>
							<th style="text-align: light; white-space: nowrap;">ë¦¬ë·° ìˆ˜</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="myPage, status : ${reviewCount}"
							th:if="${status.index} < 4">
							<td class="center" th:if="${status.index} == 0">ğŸ¥‡</td>
							<td class="center" th:if="${status.index} == 1">ğŸ¥ˆ</td>
							<td class="center" th:if="${status.index} == 2">ğŸ¥‰</td>
							<td class="center" th:unless="${status.index} < 3"
								th:text="${status.index + 1} + ." style="padding-left: 8px;"></td>
							<td class="center"><a
								th:href="@{/member/myPage(id=${myPage.id})}"
								class="nickname-link"> <span
									th:text="${myPage.beeMember.nickname}"></span>
							</a> ë‹˜</td>
							<td class="center" style="text-align: center;"
								th:text="${myPage.beeMember.review.size()}"></td>
						</tr>
					</tbody>
				</table>


				<div class="random-review" id="randomReviewSlider">
					<h3>ì˜¤ëŠ˜ì˜ ë¦¬ë·°</h3>
					<div id="randomReviewContainer" class="review-random-container">
						<div class="random-review-item" id="currentRandomReview">
							<!-- JavaScriptì—ì„œ ë‚´ìš©ì„ ì±„ì›ë‹ˆë‹¤. -->
						</div>
					</div>
					<button id="nextReviewButton">ë‹¤ìŒ</button>
				</div>
			</div>
		</div>
	</div>
	<div class="main">
		<div class="myPageMain">
			<div id="reviewListContainer" th:if="${!reviews.isEmpty()}"
				class="myPageReview">
				<div th:each="review, status : ${reviews}" class="review-box"
					th:id="'reviewBox' + ${status.index}">
					<div class="restaurant_name_head">
						<span><img src="/image/bee.jpg" alt="ë²Œ ì´ë¯¸ì§€"
							style="width: 35px; height: 35px; object-fit: cover;"></span> <a
							th:href="@{/restaurant/rtread/{id}(id=${review.restaurant.id}, reviewId=${review.id})}"
							title="ì‹ë‹¹ ì •ë³´ë¡œ ì´ë™"> <span th:text="${review.restaurant.name}"
							class="restaurant_name" style="text-decoration: none;"></span>
						</a>
						<div class="rating-stars">
							<span th:each="i : ${#numbers.sequence(1, 5)}"> <img
								th:if="${review.rating >= i}" src="/myPageImage/full_star.png"
								alt="ê½‰ ì°¬ ë³„"> <img th:unless="${review.rating >= i}"
								src="/myPageImage/empty_star.png" alt="ë¹ˆ ë³„">
							</span>
						</div>
						<span class="review-date"
							th:text="'ë°©ë¬¸ ë‚ ì§œ :   ' + ${review.visitDate}"></span> <span
							class="go-review"> <a
							th:href="@{/restaurant/rtread/{restaurantId}(restaurantId=${review.restaurant.id}, reviewId=${review.id})}">ë¦¬ë·°ë³´ëŸ¬
								ê°€ê¸°</a>
						</span>
					</div>
					<div class="img-and-review">
						<div class="image-box"
							th:if="${review.attachedFile != null and !review.attachedFile.isEmpty()}">
							<div th:if="${review.attachedFile.size() > 1}">
								<img
									th:src="@{'/review/display?filename='+${review.attachedFile[0].saved_filename}}"
									alt="Review Image"
									style="width: 160px; height: 160px; object-fit: cover;">
								<button class="image-more-button"
									th:onclick="|showImageModal(${review.id})|">
									ì‚¬ì§„ ë”ë³´ê¸° <span th:text="|+${review.attachedFile.size() - 1}|"></span>
								</button>
								<div class="image-modal" th:id="'imageModal' + ${review.id}">
									<div class="image-modal-content">
										<span class="close-modal"
											th:onclick="|closeImageModal(${review.id})|">Ã—</span>
										<div th:each="file : ${review.attachedFile}">
											<img
												th:src="@{'/review/display?filename='+${file.saved_filename}}"
												alt="Review Image"
												th:onclick="|showLargeImageModal('@{'/review/display?filename='+${file.saved_filename}}', ${review.id})|">
										</div>
									</div>
								</div>

								<!-- largeImageModalì„ imageModalê³¼ ê°™ì€ ë ˆë²¨ë¡œ ì´ë™ -->
								<div id="largeImageModal" class="modal">
									<div class="large-image-modal-content">
										<span class="close-modal" onclick="closeLargeImageModal()">Ã—</span>
										<img id="largeImage" src="" alt="Large Image">
									</div>
								</div>
							</div>
							<div th:unless="${review.attachedFile.size() > 1}">
								<img
									th:src="@{'/review/display?filename='+${review.attachedFile[0].saved_filename}}"
									alt="Review Image"
									style="width: 160px; height: 160px; object-fit: cover;"
									th:onclick="|showLargeImageModal('@{'/review/display?filename='+${review.attachedFile[0].saved_filename}}')|">
							</div>
						</div>
						<div class="image-box"
							th:unless="${review.attachedFile != null and !review.attachedFile.isEmpty()}">
							<img src="/myPageImage/no-review-img.jpg" alt="No Review Image"
								style="width: 160px; height: 160px; object-fit: cover;">
						</div>
						<div class="review-main">
							<div class="review-rating">
								<p>
									ì¹œì ˆ í¬ì¸íŠ¸: <span class="gauge-container"> <span
										class="gauge"
										th:style="'width:' + ${review.kindRating * 33.33} + '%; background-color:' + (${review.kindRating == 1 ? '#ff4c4c' : (review.kindRating == 2 ? '#ffc107' : '#4caf50')})"></span>
									</span> ë§› í¬ì¸íŠ¸: <span class="gauge-container"> <span
										class="gauge"
										th:style="'width:' + ${review.tasteRating * 33.33} + '%; background-color:' + (${review.tasteRating == 1 ? '#ff4c4c' : (review.tasteRating == 2 ? '#ffc107' : '#4caf50')})"></span>
									</span> ê°€ê²© í¬ì¸íŠ¸: <span class="gauge-container"> <span
										class="gauge"
										th:style="'width:' + ${review.priceRating * 33.33} + '%; background-color:' + (${review.priceRating == 1 ? '#ff4c4c' : (review.priceRating == 2 ? '#ffc107' : '#4caf50')})"></span>
									</span>
								</p>
							</div>
							<div class="review-comment">
								<div class="recommendItems">
									<span>ì¶”ì²œ ë©”ë‰´: </span> <span
										th:each="reviewMenu, iterStat : ${review.reviewMenuList}"
										th:text="${reviewMenu?.menu?.name 
                ?: reviewMenu?.customMenuName 
                ?: ''} + ${!iterStat.last ? ', ' : ''}"></span>
								</div>
								<div class="review_content"
									th:id="'reviewContent' + ${review.id}"
									th:data-short-content="${review.reviewContents.length() > 100 ? review.reviewContents.substring(0, 100) : review.reviewContents}"
									th:data-full-content="${review.reviewContents}">

									<span th:id="'shortContent' + ${review.id}"
										th:text="${review.reviewContents.length() > 100 ? review.reviewContents.substring(0, 100) + '...' : review.reviewContents}">
									</span> <span th:id="'fullContent' + ${review.id}"
										th:text="${review.reviewContents}" style="display: none;"></span>

									<button th:if="${review.reviewContents.length() > 100}"
										th:id="'moreButton' + ${review.id}" class="more-button"
										th:attr="onclick=|toggleReview(this, '${review.id}')|">ë”ë³´ê¸°</button>
								</div>

							</div>
							<div class="review-create-date"
								th:text="'ë¦¬ë·° ì‘ì„± ë‚ ì§œ : '+ ${review.createDate}"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="no-review"
				th:unless="${!myPage.beeMember.review.isEmpty()}">
				<div class="no-review-info">
					ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤ã… 
					<p th:if="${#authentication.isAuthenticated() and isOwner}">
						<a href="/">ë¦¬ë·° ì‘ì„±í•˜ëŸ¬ ê°€ê¸°</a> ğŸ‘‰
					</p>
				</div>
			</div>

			<div class="ranking">
				<h2>ë¦¬ë·°ì™•ğŸ‘‘</h2>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>#</th>
							<th style="text-align: left;">ë‹‰ë„¤ì„</th>
							<th style="text-align: light; white-space: nowrap;">ë¦¬ë·° ìˆ˜</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="myPage, status : ${reviewCount}"
							th:if="${status.index} < 4">
							<td class="center" th:if="${status.index} == 0">ğŸ¥‡</td>
							<td class="center" th:if="${status.index} == 1">ğŸ¥ˆ</td>
							<td class="center" th:if="${status.index} == 2">ğŸ¥‰</td>
							<td class="center" th:unless="${status.index} < 3"
								th:text="${status.index + 1} + ." style="padding-left: 8px;"></td>
							<td class="center"><a
								th:href="@{/member/myPage(id=${myPage.id})}"
								class="nickname-link"> <span
									th:text="${myPage.beeMember.nickname}"></span>
							</a> ë‹˜</td>
							<td class="center" style="text-align: center;"
								th:text="${myPage.beeMember.review.size()}"></td>
						</tr>
					</tbody>
				</table>


				<div class="random-review" id="randomReviewSlider">
					<h3>ì˜¤ëŠ˜ì˜ ë¦¬ë·°</h3>
					<div id="randomReviewContainer" class="review-random-container">
						<div class="random-review-item" id="currentRandomReview">
							<!-- JavaScriptì—ì„œ ë‚´ìš©ì„ ì±„ì›ë‹ˆë‹¤. -->
						</div>
					</div>
					<button id="nextReviewButton">ë‹¤ìŒ</button>
				</div>
			</div>
		</div>


		<!-- ìœ„ë¡œê°€ëŠ” í™”ì‚´í‘œ ë²„íŠ¼ -->
		<a onclick="scrollToTop()" id="scrollToTopButton" title="ìœ„ë¡œê°€ê¸°"> <svg
				xmlns="http://www.w3.org/2000/svg" width="24" height="24"
				viewBox="0 0 24 24" fill="none" stroke="currentColor"
				stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
				class="feather-arrow-up">
        <line x1="12" y1="19" x2="12" y2="5"></line>
        <polyline points="7 10 12 5 17 10"></polyline>
    </svg>
		</a>

		<!-- ë¦¬ë·° í˜ì´ì§• -->
		<nav th:if="${reviews.totalPages > 1}"
			aria-label="Review page navigation" class="pagination-container"
			id="reviewPaginationContainer"
			th:style="${currentTab == 'myReview'} ? 'display:block' : 'display:none'">
			<ul class="pagination">
				<!-- ì²« í˜ì´ì§€ê°€ ì•„ë‹Œ ê²½ìš°ì—ë§Œ << ë²„íŠ¼ í‘œì‹œ (5í˜ì´ì§€ ì•ìœ¼ë¡œ ì´ë™) -->
				<li th:if="${reviews.number > 0}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${reviews.number - (reviews.number > 5 ? 5 : reviews.number)})}">
						<i class="fas fa-angle-double-left"></i>
				</a></li>

				<!-- ì´ì „ í˜ì´ì§€ ë²„íŠ¼ -->
				<li th:if="${reviews.hasPrevious()}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${reviews.number - 1})}">
						<i class="fas fa-chevron-left"></i>
				</a></li>

				<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
				<li th:each="i : ${#numbers.sequence(0, reviews.totalPages - 1)}"
					th:if="${(reviews.number <= 2 and i < 5) or (i >= (reviews.number - 2) && i <= (reviews.number + 2))}"
					th:classappend="${reviews.number == i} ? 'active' : ''"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${i})}"
					th:text="${i + 1}"></a></li>

				<!-- ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ -->
				<li th:if="${reviews.hasNext()}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${reviews.number + 1})}">
						<i class="fas fa-chevron-right"></i>
				</a></li>

				<!-- ë§ˆì§€ë§‰ í˜ì´ì§€ê°€ ë„˜ì§€ ì•ŠëŠ” ë²”ìœ„ì—ì„œ >> ë²„íŠ¼ í‘œì‹œ (5í˜ì´ì§€ ì•ìœ¼ë¡œ ì´ë™) -->
				<li th:if="${reviews.number < reviews.totalPages - 1}"
					class="page-item"><a class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${reviews.number + (reviews.totalPages - reviews.number > 5 ? 5 : reviews.totalPages - reviews.number - 1)})}">
						<i class="fas fa-angle-double-right"></i>
				</a></li>
			</ul>
		</nav>

		<!-- ë ˆìŠ¤í† ë‘ í˜ì´ì§• -->
		<nav th:if="${restaurants.totalPages > 1}"
			aria-label="Restaurant page navigation" class="pagination-container"
			id="restaurantPaginationContainer"
			th:style="${currentTab == 'myRestaurant'} ? 'display:block' : 'display:none'">
			<ul class="pagination">

				<!-- ì²« í˜ì´ì§€ê°€ ì•„ë‹Œ ê²½ìš°ì—ë§Œ << ë²„íŠ¼ í‘œì‹œ (5í˜ì´ì§€ ì•ìœ¼ë¡œ ì´ë™) -->
				<li th:if="${restaurants.number > 0}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${page}, rtPage=${restaurants.number - (restaurants.number > 5 ? 5 : restaurants.number)}, tab='myRestaurant')}">
						<i class="fas fa-angle-double-left"></i>
				</a></li>

				<!-- ì´ì „ í˜ì´ì§€ ë²„íŠ¼ -->
				<li th:if="${restaurants.hasPrevious()}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${page}, rtPage=${restaurants.number - 1}, tab='myRestaurant')}">
						<i class="fas fa-chevron-left"></i>
				</a></li>

				<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
				<li
					th:each="i : ${#numbers.sequence(0, restaurants.totalPages - 1)}"
					th:if="${(restaurants.number <= 2 and i < 5) or (i >= (restaurants.number - 2) && i <= (restaurants.number + 2))}"
					th:classappend="${restaurants.number == i} ? 'active' : ''"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${page}, rtPage=${i}, tab='myRestaurant')}"
					th:text="${i + 1}"></a></li>

				<!-- ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ -->
				<li th:if="${restaurants.hasNext()}" class="page-item"><a
					class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${page}, rtPage=${restaurants.number + 1}, tab='myRestaurant')}">
						<i class="fas fa-chevron-right"></i>
				</a></li>

				<!-- ë§ˆì§€ë§‰ í˜ì´ì§€ê°€ ë„˜ì§€ ì•ŠëŠ” ë²”ìœ„ì—ì„œ >> ë²„íŠ¼ í‘œì‹œ (5í˜ì´ì§€ ì•ìœ¼ë¡œ ì´ë™) -->
				<li th:if="${restaurants.number < restaurants.totalPages - 1}"
					class="page-item"><a class="page-link"
					th:href="@{/member/myPage(id=${myPage.id}, sort=${currentSort}, page=${page}, rtPage=${restaurants.number + (restaurants.totalPages - restaurants.number > 5 ? 5 : restaurants.totalPages - restaurants.number - 1)}, tab='myRestaurant')}">
						<i class="fas fa-angle-double-right"></i>
				</a></li>
			</ul>
		</nav>
		<div class="under-bar">
			<img src="/image/bee.jpg" class="under-image"> <span
				class="under-comment">DeliciousBee</span>
		</div>
	</div>


	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		//íŒ”ë¡œì›Œ**************
		async function toggleFollow(button) {
    const followingId = button.dataset.followingId;
    const img = button.querySelector('img'); // ì´ë¯¸ì§€ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const isFollowing = img.src.endsWith('/myPageImage/unfollow.png'); // ì´ë¯¸ì§€ srcë¡œ íŒë³„
    const url = isFollowing ? `/unfollow/${followingId}` : `/follow/${followingId}`;

    try {
        const response = await fetch(url, { method: 'POST' });
        const success = await response.json();

        if (success) {
            // ì´ë¯¸ì§€ src ë° í´ë˜ìŠ¤ ë³€ê²½
            img.src = isFollowing ? '/myPageImage/follow.png' : '/myPageImage/unfollow.png';
            button.classList.toggle('follow-button', !isFollowing);
            button.classList.toggle('nofollow', isFollowing);
            
            // íˆ´íŒ ë‚´ìš© ë³€ê²½
            const tooltip = button.querySelector('.tooltiptext'); 
            if (tooltip) { 
                tooltip.textContent = isFollowing ? 'íŒ”ë¡œìš°' : 'ì–¸íŒ”ë¡œìš°';
            }


        } else {
            alert('íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    } catch (error) {
        console.error('íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        alert('íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
}
		//ë¡œê·¸ì¸ì•ˆí•œì‚¬ëŒ íŒ”ë¡œì›Œí•˜ë ¤í• ë•Œ**************
		function showLoginAlert() {
	        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.");
	        return true; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
	    }
		
		
		// íŒ”ë¡œì›Œ ëª©ë¡ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
		function showFollowersModal() {
		    document.getElementById('followersModal').style.display = 'block';

		    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
		    window.onclick = function (event) {
		        if (event.target == document.getElementById('followersModal')) {
		            closeFollowersModal();
		        }
		    };
		}

		// íŒ”ë¡œì›Œ ëª©ë¡ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
		function closeFollowersModal() {
		    document.getElementById('followersModal').style.display = 'none';
		    window.onclick = null; // ë‹«í ë•Œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
		}

		// íŒ”ë¡œì‰ ëª©ë¡ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
		function showFollowingModal() {
		    document.getElementById('followingModal').style.display = 'block';

		    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
		    window.onclick = function (event) {
		        if (event.target == document.getElementById('followingModal')) {
		            closeFollowingModal();
		        }
		    };
		}

		// íŒ”ë¡œì‰ ëª©ë¡ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
		function closeFollowingModal() {
		    document.getElementById('followingModal').style.display = 'none';
		    window.onclick = null; // ë‹«í ë•Œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
		}

		// ì˜¤ëŠ˜ì˜ ë°©ë¬¸ì ëª©ë¡ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
		function showVisitorsModal() {
		    document.getElementById('visitorsModal').style.display = 'block';

		    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
		    window.onclick = function (event) {
		        if (event.target == document.getElementById('visitorsModal')) {
		            closeVisitorsModal();
		        }
		    };
		}

		// ì˜¤ëŠ˜ì˜ ë°©ë¬¸ì ëª©ë¡ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
		function closeVisitorsModal() {
		    document.getElementById('visitorsModal').style.display = 'none';
		    window.onclick = null; // ë‹«í ë•Œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
		}

		//ë©”ë‰´ ëª¨ë‹¬
		  function showRtMenuModal(modalId) {
	            const modal = document.getElementById(modalId);
	            const underBar = document.querySelector('.under-bar'); 
	            // ì´ë¯¸ ì—´ë ¤ìˆëŠ” ê²½ìš° ë‹«ê¸°
	            if (modal.style.display === 'block') {
	                closeRtMenuModal(modalId);
	                return; // í•¨ìˆ˜ ì¢…ë£Œ
	            }
			
	            modal.style.display = 'block';
	            underBar.style.marginTop = '200px';
	             // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (í´ë¡œì € í•¨ìˆ˜ ì‚¬ìš©)
			   function handleImageModalOutsideClick(event) {
			     if (event.target == modal) {
			       closeRtMenuModal(modalId); 
			     }
			   }
			   window.addEventListener('click', handleImageModalOutsideClick);
	        }

	        function closeRtMenuModal(modalId) {
	             const modal = document.getElementById(modalId);
	             const underBar = document.querySelector('.under-bar'); // .under-bar ì„ íƒ
			     modal.style.display = 'none';
			     underBar.style.marginTop = '0';
			     window.removeEventListener('click', handleImageModalOutsideClick);  // ë¦¬ìŠ¤ë„ˆ ì œê±°
	            
	        }



		//ë”ë³´ê¸° ë²„íŠ¼
		function toggleReview(button, reviewId) {
		  var shortContent = document.getElementById('shortContent' + reviewId);
		  var fullContent = document.getElementById('fullContent' + reviewId);

		  if (button.textContent === 'ë”ë³´ê¸°') {
		    shortContent.style.display = 'none'; // ì§§ì€ ë‚´ìš© ìˆ¨ê¹€
		    fullContent.style.display = 'inline'; // ì „ì²´ ë‚´ìš© í‘œì‹œ
		    button.textContent = 'ì ‘ê¸°'; // ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
		  } else {
		    shortContent.style.display = 'inline'; // ì§§ì€ ë‚´ìš© í‘œì‹œ
		    fullContent.style.display = 'none'; // ì „ì²´ ë‚´ìš© ìˆ¨ê¹€
		    button.textContent = 'ë”ë³´ê¸°'; // ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
		  }
		}

// ìœ„ë¡œê°€ëŠ” í™”ì‚´í‘œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth' // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ íš¨ê³¼
    });
}



//ë¦¬ë·°ë¡œ ì´ë™
 function scrollToReview(reviewId) {
    if (reviewId) {
      const reviewElement = document.getElementById('review-' + reviewId);
      if (reviewElement) {
        reviewElement.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
      }
    }
  }

// ì •ë ¬ ìˆœì„œ ë°”ê¾¸ê¸°
function sortReviews() {
    var sort = document.getElementById("reviewSort").value;
    var url = new URL(window.location.href);
    var params = new URLSearchParams(url.search);

    var currentPage = params.get('page') || "0";

    params.set('sort', sort);
    params.set('page', currentPage); 
    url.search = params.toString();

    fetch(url.toString())
        .then(response => response.text())
        .then(html => {
            var parser = new DOMParser();
            var doc = parser.parseFromString(html, 'text/html');
            
            var newReviewList = doc.getElementById('reviewListContainer');
            document.getElementById('reviewListContainer').innerHTML = newReviewList.innerHTML;
            
            var newPagination = doc.querySelector('.pagination-container');
            var currentPagination = document.querySelector('.pagination-container');
            if (newPagination && currentPagination) {
                currentPagination.innerHTML = newPagination.innerHTML;
            }

            // Update the URL without reloading the page
            history.pushState(null, '', url.toString());
        })
        .catch(error => console.error('Error:', error));
}
//ì´ë¯¸ì§€ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜ (showImageModal ì™¸ë¶€ë¡œ ì´ë™)
 function closeImageModal(reviewId) {
   document.getElementById('imageModal' + reviewId).style.display = 'none';
   window.removeEventListener('click', handleImageModalOutsideClick);  // ë¦¬ìŠ¤ë„ˆ ì œê±°
 }

 // ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
 function showImageModal(reviewId) {
   const modal = document.getElementById('imageModal' + reviewId);
   modal.style.display = 'block';

   // ì´ë¯¸ì§€ ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (í´ë¡œì € í•¨ìˆ˜ ì‚¬ìš©)
   function handleImageModalOutsideClick(event) {
     if (event.target == modal) {
       closeImageModal(reviewId); // ì´ì œ ì™¸ë¶€ì—ì„œ ì •ì˜ëœ closeImageModal í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
     }
   }
   window.addEventListener('click', handleImageModalOutsideClick);
 }

//í° ì´ë¯¸ì§€ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜ (showLargeImageModal ì™¸ë¶€ë¡œ ì´ë™)
 function closeLargeImageModal() {
   document.getElementById('largeImageModal').style.display = 'none';
   window.removeEventListener('click', handleLargeImageModalOutsideClick); // ë¦¬ìŠ¤ë„ˆ ì œê±°
 }

 // í° ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
 function showLargeImageModal(imageUrl) {
   const modal = document.getElementById('largeImageModal');
   document.getElementById('largeImage').src = imageUrl;
   modal.style.display = 'block';

   // í° ì´ë¯¸ì§€ ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (í´ë¡œì € í•¨ìˆ˜ ì‚¬ìš©)
   function handleLargeImageModalOutsideClick(event) {
     if (event.target == modal) {
       closeLargeImageModal(); // ì´ì œ ì™¸ë¶€ì—ì„œ ì •ì˜ëœ closeLargeImageModal í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
     }
   }
   window.addEventListener('click', handleLargeImageModalOutsideClick);
 }
 
 
 //ëœë¤ ë¦¬ë·°
 $(document).ready(function() {
    let currentReviewIndex = 0;
    let randomReviews = [];
    let intervalId; // ìë™ ìŠ¬ë¼ì´ë“œë¥¼ ìœ„í•œ interval ID ì €ì¥

    function loadRandomReviews() {
        $.ajax({
            url: '/member/randomReviews',
            type: 'GET',
            success: function(data) {
                randomReviews = JSON.parse(data);
                if (randomReviews.length > 0) { // ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ìŠ¬ë¼ì´ë“œ ì‹œì‘
                    showRandomReview(currentReviewIndex);
                    startAutoSlide();
                }
            },
            error: function(error) {
                console.error('ëœë¤ ë¦¬ë·° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
            }
        });
    }

    loadRandomReviews(); // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¦¬ë·° ë¡œë“œ

    function showRandomReview(index) {
        if (randomReviews.length === 0) {
            $('#currentRandomReview').html("<p>ì˜¤ëŠ˜ì˜ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>"); // ë¦¬ë·° ì—†ì„ ë•Œ ë©”ì‹œì§€ í‘œì‹œ
            return;
        }

        const review = randomReviews[index];
        let reviewHtml = `
            <a href="/restaurant/rtread/${review.restaurantId}?reviewId=${review.reviewId}" class="random-review-link">
                <div class="random-review-image">
                    <img src="${review.imageUrl}" alt="Random Review Image">
                </div>
                <div class="random-review-content">
                    <span>${review.restaurantName}</span>
                </div>
            </a>
        `;

        // ë¶€ë“œëŸ½ê³  ì²œì²œíˆ ìŠ¬ë¼ì´ë“œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì ìš©
        $('#currentRandomReview').fadeOut(800, function() { 
            $(this).html(reviewHtml).fadeIn(800); 
        });
    }

    $("#nextReviewButton").click(function() {
        clearInterval(intervalId); // ìˆ˜ë™ í´ë¦­ ì‹œ ìë™ ìŠ¬ë¼ì´ë“œ ë©ˆì¶¤
        currentReviewIndex = (currentReviewIndex + 1) % randomReviews.length;
        showRandomReview(currentReviewIndex);
        startAutoSlide(); // ë‹¤ì‹œ ìë™ ìŠ¬ë¼ì´ë“œ ì‹œì‘
    });

    function startAutoSlide() {
        intervalId = setInterval(function() {
            currentReviewIndex = (currentReviewIndex + 1) % randomReviews.length;
            showRandomReview(currentReviewIndex);
        }, 7000); // 5ì´ˆë§ˆë‹¤ ìŠ¬ë¼ì´ë“œ
    }
});
 
//ëœë¤ ë ˆìŠ¤í† ë‘
 $(document).ready(function() {
    let currentRestaurantIndex = 0;
    let randomRestaurants = [];
    let restaurantIntervalId; // Save interval ID for auto slide

    function loadRandomRestaurants() {
        $.ajax({
            url: '/member/randomRestaurants',
            type: 'GET',
            success: function(data) {
                randomRestaurants = JSON.parse(data);
                if (randomRestaurants.length > 0) {
                    showRandomRestaurant(currentRestaurantIndex);
                    startRestaurantAutoSlide(); // Start auto slide
                }
            },
            error: function(error) {
                console.error('ëœë¤ ë ˆìŠ¤í† ë‘ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
            }
        });
    }

    loadRandomRestaurants(); // Load restaurants on page load

    function showRandomRestaurant(index) {
        if (randomRestaurants.length === 0) {
            $('#currentRandomRestaurant').html("<p>ì˜¤ëŠ˜ì˜ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤.</p>");
            return;
        }

        const restaurant = randomRestaurants[index];
        let restaurantHtml = `
            <a href="/restaurant/rtread/${restaurant.restaurantId}?reviewId=${restaurant.restaurantId}" class="random-restaurant-link">
                <div class="random-restaurant-image">
                    <img src="${restaurant.imageUrl}" alt="Random Restaurant Image">
                </div>
                <div class="restaurant-info-wrapper">
                    <span class="random-restaurant-content">${restaurant.restaurantName}</span>
                    <div class="random-restaurant-like">
                        <div class="heart-icon">
                            <span class="like-count">${restaurant.likeCount}</span>
                        </div>
                    </div>
                </div>
            </a>
        `;

        // Fade out current restaurant and fade in new restaurant
        $('#currentRandomRestaurant').fadeOut(800, function() {
            $(this).html(restaurantHtml).fadeIn(800);
        });
    }

    $("#nextRestaurantButton").click(function() {
        clearInterval(restaurantIntervalId); // Clear the auto slide interval
        currentRestaurantIndex = (currentRestaurantIndex + 1) % randomRestaurants.length;
        showRandomRestaurant(currentRestaurantIndex);
        startRestaurantAutoSlide(); // Restart auto slide
    });

    function startRestaurantAutoSlide() {
        restaurantIntervalId = setInterval(function() {
            currentRestaurantIndex = (currentRestaurantIndex + 1) % randomRestaurants.length;
            showRandomRestaurant(currentRestaurantIndex);
        }, 7000);
    }
});
 
 
 
 //íƒ­ ë³€ê²½******************
 let pageFullyLoaded = false;
let currentTab = 'myReview';

document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const initialTab = urlParams.get('tab') || 'myReview';
    showTab(initialTab);

    document.querySelectorAll('.myPageNav button').forEach(button => {
        button.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            if (!pageFullyLoaded && tabName === 'myRestaurant') {
                alert('í˜ì´ì§€ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.');
            } else {
                showTab(tabName);
            }
        });
    });
});

window.addEventListener('load', function() {
    pageFullyLoaded = true;
});

function showTab(tab) {
    currentTab = tab;

    const reviewListContainer = document.getElementById('reviewListContainer');
    const myRestaurantContent = document.getElementById('myRestaurantContent');
    const rankingElement = document.querySelector('.ranking');
    const reviewSort = document.getElementById('reviewSort');
    const reviewPaginationContainer = document.getElementById('reviewPaginationContainer');
    const restaurantPaginationContainer = document.getElementById('restaurantPaginationContainer');

    document.querySelectorAll('.myPageNav button').forEach(button => {
        button.classList.remove('active');
    });
    document.querySelector(`.myPageNav button[data-tab="${tab}"]`).classList.add('active');

    if (tab === 'myReview') {
        reviewListContainer.style.display = 'block';
        myRestaurantContent.style.display = 'none';
        rankingElement.style.display = 'block';
        reviewSort.style.display = 'block';
        reviewPaginationContainer.style.display = 'block';
        restaurantPaginationContainer.style.display = 'none';
    } else if (tab === 'myRestaurant') {
        reviewListContainer.style.display = 'none';
        myRestaurantContent.style.display = 'block';
        rankingElement.style.display = 'none';
        reviewSort.style.display = 'none';
        reviewPaginationContainer.style.display = 'none';
        restaurantPaginationContainer.style.display = 'block';
    }

    // URL ì—…ë°ì´íŠ¸
    const url = new URL(window.location);
    url.searchParams.set('tab', tab);
    window.history.pushState({}, '', url);
}
 
 function openModal(modalId) {
     const modal = document.getElementById(modalId);
     modal.style.display = 'block';
 }

 function closeModal(modalId) {
     const modal = document.getElementById(modalId);
     modal.style.display = 'none';
 }
	</script>
	<script th:src="@{/js/layout.js}"></script>

</body>

</html>